<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>soap-ws</servlet-name>
    <servlet-class>net.skybert.moccasin.ws.soap.IndianWS</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>soap-ws</servlet-name>
    <url-pattern>/soap-ws</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
  </welcome-file-list>

  <login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
      <form-login-page>/login.xhtml</form-login-page>
      <form-error-page>/login.xhtml?failed=true</form-error-page>
    </form-login-config>
  </login-config>

  <security-constraint>
    <display-name>User pages security constraint</display-name>
    <web-resource-collection>
      <web-resource-name>User restricted Access</web-resource-name>
      <url-pattern>/users-only-info.xhtml</url-pattern>
    </web-resource-collection>
    <web-resource-collection>
      <url-pattern>/index.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>read</role-name>
      <role-name>write</role-name>
    </auth-constraint>
  </security-constraint>

  <!--
      Need to set the session timeout less than that of the JAAS cache
  -->
  <session-config>
    <session-timeout>1</session-timeout>
  </session-config>

  <!--
      Basic auth based contraints:
      security-constraint/web-resource-collection/auth-constraint:
      These are the roles that should be allowed to access your
      resource(s)
      These role names correspond to the role names returned by the
      rolesQuery defined within the security domain stanza in your
      standalone-[-full].xml
  -->
  <!--
      <security-constraint>
      <web-resource-collection>
      <web-resource-name>All resources</web-resource-name>
      <url-pattern>/*</url-pattern>
      </web-resource-collection>
      <auth-constraint>
      <role-name>read</role-name>
      <role-name>write</role-name>
      </auth-constraint>
      </security-constraint>
      <login-config>
      <auth-method>BASIC</auth-method>
      <realm-name>Moccasin Security Realm (just a string)</realm-name>
      </login-config>
      <security-role>
      <role-name>read</role-name>
      </security-role>
      <security-role>
      <role-name>write</role-name>
      </security-role>
  -->
</web-app>
